<script lang="ts" setup>
const emit = defineEmits<{
  possibleMoves: [{ x: number, y: number }[]],
  currentPosition: { x: number, y: number }[],
}>()
const appConfig = useAppConfig()
const primary = appConfig.theme.colors.primary
const black = appConfig.theme.colors.black
const white = appConfig.theme.colors.white

const props = defineProps({
    name: {
        type: String, required: true, nullable: false,
        validator: (value: string) => {
            return [' ', 'pawn', 'p', 'rock', 'r', 'knight', 'n', 'bishop', 'b', 'king', 'k', 'queen', 'q'].includes(value)
        }
    },
    color: {
        type: String, required: true,
        validator: (value: string) => {
            return ['white', 'black'].includes(value)
        }
    },
    size : {
        type: Number, required: true, default: 0
    },
    position: {
        type: Object, required: true,
        default: () => {
            return {
                x: 0,
                y: 0,
            }
        }
    }
    // availableMoves: {type: Array, required: true},
})

const getPieceFirstCharacter = props.name.charAt(0).toLocaleLowerCase()
const getPieceShortName = `${props.color} ${props.name.charAt(0)}`

const piece = ref<HTMLElement | null>(null)

// const { x, y, style } = useDraggable(piece, {
//   initialValue: { x: props.position.x * props.size, y: props.position.y * props.size },
// })

// console.log(props.position.x, props.position.y);

// const { x: mouseX, y: mouseY } = useMouse({ touch: false })
// const elementPosition = ref({ x: 0, y: 0 })
// const isDragging = ref(false)

// const startDrag = () => {
// isDragging.value = true
// }

// const dragElement = () => {
//     if (isDragging.value) {
//         elementPosition.value.x = mouseX.value
//         elementPosition.value.y = mouseY.value
//     }
// }

// const stopDrag = () => {
//     isDragging.value = false
// }

const getMoves = (piece:string, x:number, y:number, color:string) => {
    emit('currentPosition', {x, y})

    let possibleMoves:{x:number, y:number}[] = []

    switch (piece) {
        case 'p': 
            possibleMoves = generatePossibleMovesForPawn(x, y, color)
            break
        case 'n':
            possibleMoves = generatePossibleMovesForKnight(x, y, color)
            break
        case 'b':
            possibleMoves = generatePossibleMovesForBishop(x, y, color)
            break
        case 'r':
            possibleMoves = generatePossibleMovesForRook(x, y, color)
            break
        case 'q':
            possibleMoves = generatePossibleMovesForQueen(x, y, color)
            break
        case 'k':
            possibleMoves = generatePossibleMovesForKing(x, y, color)
            break
        
    }
    console.log(possibleMoves);
    emit('possibleMoves', possibleMoves)
}


</script>

<template>
    <div
        ref="piece"
        class="piece"
        :class="getPieceShortName"
        @click="getMoves(getPieceFirstCharacter, position.x, position.y, color)"
    >

        <template v-if="color === 'white'">
            <template v-if="getPieceFirstCharacter === 'p'">
                <svg width="50" height="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.6616 4.79246C18.8931 6.16736 17.9567 8.76001 19.056 11.7848C19.4224 12.7276 19.6667 13.5525 19.626 13.5918C19.5445 13.6311 18.8117 14.0239 17.9975 14.5346C15.2697 16.1059 14.0483 20.2698 15.3919 23.3339C15.6768 24.041 16.5318 25.1016 17.2646 25.7301C18.3232 26.5944 18.486 26.8693 18.0382 27.1443C16.0025 28.2442 13.0712 30.7583 12.0127 32.2511C10.0992 35.0008 9.44784 37.1614 9.24427 41.7575L9 46H25H41L40.7557 41.7575C40.5929 38.8898 40.2672 36.8471 39.6565 35.3151C38.6387 32.6832 35.8702 29.5406 33.3053 28.0871C32.3282 27.5371 31.514 26.9872 31.514 26.8693C31.514 26.7515 32.0025 26.3194 32.5725 25.848C33.8346 24.9052 35.1374 22.3125 35.1781 20.7019C35.1781 18.62 34.2417 16.538 32.7354 15.2024C31.8804 14.4953 30.9847 13.8275 30.6997 13.7096C30.2519 13.5918 30.2519 13.2775 30.6183 12.2169C30.9033 11.5098 31.1069 10.1742 31.1069 9.2314C31.1069 5.14601 25.855 2.63191 21.6616 4.79246Z" fill="white"/>
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'r'">
                <svg width="51" height="50" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.6134 5.10929C9.66492 6.09974 9.54636 6.49592 9.54636 9.18992V12.1613L12.5102 15.093L15.4741 18.0247V24.9974V31.9305L11.7199 35.6942L7.96564 39.4579V42.0727C7.96564 46.2721 6.66154 45.9948 26.0254 45.9948C45.2707 45.9948 43.9271 46.3117 43.9271 41.9934V39.4579L40.3705 35.8923L36.8138 32.3267V25.1955V18.0247L39.5801 15.2911L42.3464 12.5574V9.15031C42.3464 6.09974 42.2673 5.62433 41.4375 4.87159C40.6866 4.15847 40.0543 4 37.7623 4C34.7984 4 34.0476 4.35656 34.0476 5.86203C34.0476 6.65439 33.85 6.77324 32.6644 6.77324C31.4789 6.77324 31.2813 6.65439 31.2813 5.86203C31.2813 4.23771 30.6095 4 26.144 4C21.6784 4 21.0066 4.23771 21.0066 5.86203C21.0066 6.65439 20.809 6.77324 19.6235 6.77324C18.5565 6.77324 18.2403 6.61477 18.2403 6.06012C18.2403 4.63388 16.9758 4 14.249 4C11.957 4 11.5618 4.11885 10.6134 5.10929ZM34.0476 18.8567V20.2433L26.0649 20.164L18.0428 20.0452L17.9242 18.7378L17.8056 17.47H25.9069H34.0476V18.8567ZM34.0476 31.7324V32.921H25.9464H17.8452V31.7324V30.5439H25.9464H34.0476V31.7324Z" fill="white"/>
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'n'">
                <svg width="51" height="50" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.63 5.53084L20.3705 7.06168L18.245 6.08037C17.0641 5.53084 15.2535 5.05981 14.2695 5.05981L12.4589 4.98131L12.5376 7.72897C12.6163 11.0262 12.144 12.557 8.24725 20.8393C6.6728 24.1757 4.98027 28.0617 4.50794 29.5533C3.642 32.1047 3.60263 32.2224 4.31114 33.3215C5.29516 34.9701 6.75153 35.9907 8.87703 36.5794C10.1366 36.9327 10.8844 36.972 11.3568 36.6972C11.8291 36.3832 12.0653 36.5009 12.3802 37.129C12.6163 37.6 13.1674 37.9925 13.6397 38.071C14.3089 38.1888 14.8993 37.6 16.4737 35.2841C17.5365 33.6748 18.9928 31.9084 19.7013 31.3196C21.1183 30.1028 23.9917 28.572 24.2672 28.8467C24.6608 29.2393 22.7715 32.772 20.5279 35.9121C19.229 37.6785 17.9301 39.6411 17.5758 40.3084C17.1035 41.2505 16.1195 45.0187 16.1195 45.8037C16.1195 45.9215 22.929 46 31.2342 46H46.3095L46.585 44.1944C47.451 37.6393 45.7978 27.0804 43.0031 21.4673C39.5394 14.5981 34.5011 10.1626 29.3448 9.53458C27.4948 9.29906 27.3768 9.22056 26.8651 7.65047C26.314 6.00187 24.4247 4 23.4013 4C23.0864 4 22.2992 4.70654 21.63 5.53084ZM29.8172 13.2243C33.9107 14.4411 39.4213 20.957 41.3893 26.9626C42.5702 30.5346 43.2787 35.0093 43.2787 38.8953C43.2787 41.7215 42.6883 43.0561 41.6255 42.6636C40.7989 42.3495 40.5234 41.2505 40.5234 37.914C40.5234 34.2243 39.5787 28.8467 38.3979 25.9813C36.2724 20.8 31.9427 16.129 27.9278 14.7159C26.0385 14.0486 25.4481 13.3028 26.4715 12.9103C27.2587 12.557 27.6917 12.5963 29.8172 13.2243ZM18.3631 16.443C18.4811 16.7178 17.8514 17.6598 17.0248 18.5234C15.8833 19.7794 15.2142 20.172 14.1514 20.2112C12.144 20.329 12.0653 18.9551 13.9153 17.1103C15.0961 15.9327 15.5291 15.7364 16.7493 15.8542C17.5758 15.9327 18.2843 16.1682 18.3631 16.443ZM8.24725 30.6131C8.24725 31.5944 7.42067 32.5757 6.476 32.7327C5.84622 32.8112 5.72814 32.6542 5.80686 31.8692C5.9643 30.2598 8.24725 29.0822 8.24725 30.6131Z" fill="white"/>
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'b'">
                <svg width="51" height="50" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.9364 3.66555C21.2672 4.71643 20.8499 7.13345 21.9627 9.27023L22.4843 10.2861L20.8847 11.0567C20.0153 11.4771 18.1722 12.9483 16.7464 14.3495C14.5903 16.4862 14.1383 17.1168 13.6166 18.8682C12.7472 21.8807 13.408 24.5079 15.9813 28.151C17.0246 29.6222 17.0594 29.6922 16.6073 31.3036C15.5293 35.1218 15.8422 36.1026 18.3808 36.4879C19.1111 36.628 19.7023 36.8382 19.7023 36.9433C19.7023 37.5037 16.2943 38.0292 12.8863 38.0292C8.64377 38.0292 7.77439 38.3444 6.2095 40.5163L5.13147 41.9875L6.4877 44.0192C7.25276 45.1401 8.22647 46.2961 8.60899 46.5763C9.26972 47.0317 9.4436 47.0317 10.1739 46.5413C10.6607 46.226 13.0254 45.7356 15.6336 45.3853C21.2324 44.6147 22.693 44.2293 24.3622 43.1084L25.6836 42.1977L26.7964 42.9333C28.7786 44.1593 30.8651 44.7198 35.8032 45.3853C39.1069 45.8057 40.8109 46.191 41.2629 46.6113C41.7498 47.0667 42.0628 47.1017 42.6192 46.8215C43.2799 46.4362 46.1315 42.583 46.1315 42.0225C46.1315 41.4971 44.2536 39.3253 43.2104 38.6947C42.341 38.1693 41.4716 38.0292 38.5852 38.0292C35.0729 38.0292 31.5259 37.4687 31.5259 36.9082C31.5259 36.7681 31.9084 36.628 32.3953 36.628C33.6124 36.628 35.2468 35.7173 35.4902 34.9466C35.5946 34.6314 35.3859 33.2652 35.0034 31.9341L34.3427 29.5521L35.6989 27.5555C39.0721 22.5463 38.8634 18.553 34.9686 14.5947C33.5081 13.1234 30.6217 11.0567 29.3698 10.6013C28.8482 10.4262 28.883 10.2861 29.5089 8.98999C30.4131 7.16847 30.1349 5.38199 28.7439 3.98082C27.9092 3.14012 27.4919 3 25.8923 3C24.6752 3 23.6667 3.2452 22.9364 3.66555ZM26.7964 6.01251C27.4572 6.64304 27.4919 6.99333 27.0051 7.93912C26.3096 9.2352 24.2231 8.56964 24.2231 7.02836C24.2231 5.55713 25.7532 4.96164 26.7964 6.01251ZM26.7269 16.7314C26.6226 18.0275 26.6226 18.0625 27.8397 18.0625C29.0221 18.0625 29.0916 18.1326 29.0916 19.2535C29.0916 20.3745 28.9873 20.4796 27.9788 20.5847C26.9008 20.6897 26.8312 20.7948 26.8312 22.0208C26.8312 23.2469 26.7617 23.3169 25.7184 23.3169C24.6056 23.3169 24.5708 23.2469 24.5708 21.9158C24.5708 20.6197 24.5013 20.5146 23.5623 20.5146C22.7277 20.5146 22.5539 20.3394 22.4148 19.4637C22.2409 18.2027 22.3104 18.0625 23.5971 18.0625C24.5013 18.0625 24.5708 17.9575 24.5708 16.6264C24.5708 15.2602 24.6056 15.2252 25.7184 15.3303C26.7964 15.4354 26.8312 15.5054 26.7269 16.7314ZM31.7693 27.3803C31.8736 27.6956 31.7693 28.0809 31.4911 28.256C30.9347 28.6414 19.8762 28.5363 19.5284 28.151C19.3893 28.0108 19.3545 27.6605 19.4589 27.3453C19.8066 26.5396 31.4563 26.5396 31.7693 27.3803ZM31.3172 30.8832C32.0475 31.1635 32.0127 31.9341 31.2824 32.2494C30.9347 32.3895 28.6743 32.5646 26.2748 32.6697C20.8151 32.9149 17.9983 32.1793 19.9805 31.0584C20.6064 30.6731 30.4131 30.5329 31.3172 30.8832Z" fill="white"/>
                </svg>

            </template>
            <template v-else-if="getPieceFirstCharacter === 'k'">
                <svg width="51" height="50" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.4124 20.1772C9.91969 20.6287 8.68823 22.1713 8.68823 23.6387C8.68823 25.3695 10.1063 28.0032 12.2333 30.1479C13.9126 31.841 14.3231 32.0667 16.1516 32.2925C18.4279 32.5559 20.9281 32.1044 21.4506 31.3519C22.2342 30.1855 21.0028 25.6328 19.3235 23.3753C17.2711 20.7416 14.0618 19.4247 11.4124 20.1772Z" fill="white"/>
                    <path d="M28.802 28.7182C29.511 24.3913 32.2724 20.9298 35.6682 20.1396C36.3026 19.9891 37.0863 19.9139 37.3475 19.9891C37.646 20.0644 38.2058 20.1396 38.6163 20.1396C39.0267 20.1396 39.8477 20.6288 40.4448 21.2308C41.2657 22.0585 41.527 22.6981 41.527 23.7893C41.527 25.7082 39.6611 28.8311 37.3475 30.7876C35.6309 32.2173 35.519 32.2549 32.7575 32.2549C28.9139 32.2549 28.3168 31.7658 28.802 28.7182Z" fill="white"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M23.615 3.73502C23.2418 4.93902 23.0552 5.08953 21.8984 5.08953C20.7043 5.08953 20.6297 5.16477 20.6297 6.36878C20.6297 7.49754 20.8162 7.79854 22.1223 8.51342C22.9433 9.00255 23.615 9.64218 23.615 9.94317C23.615 10.2442 22.8313 11.3353 21.8611 12.3136C20.2938 13.8938 20.1072 14.3077 19.958 16.189C19.8833 17.3177 19.7341 18.2583 19.6221 18.2583C19.5475 18.2583 18.9877 17.9197 18.428 17.4682C16.0024 15.6622 11.599 15.3988 8.6883 16.9415C7.19563 17.7316 5.44174 19.9139 4.99394 21.5317C4.13565 24.617 4.65809 26.423 7.83001 31.3143C10.181 34.8887 10.8154 36.6195 11.1512 40.5701C11.5244 44.7089 12.308 45.6495 16.3009 46.703C20.8909 47.9447 31.6008 47.6813 35.5937 46.2891C38.2805 45.3109 38.8029 44.5584 39.1014 41.2474C39.5119 37.0333 40.3702 34.6253 42.9451 30.7123C45.408 26.9874 45.8185 25.6705 45.5572 22.7358C44.9975 17.0543 38.5044 14.1572 32.9442 17.0543L30.7798 18.1831L30.5186 16.1137C30.2947 14.3077 30.0708 13.8562 28.6154 12.4641C26.6003 10.5076 26.5257 9.56693 28.2796 8.47579C29.3618 7.79854 29.5857 7.42229 29.5857 6.36878C29.5857 5.16477 29.511 5.08953 28.3169 5.08953C27.2347 5.08953 27.0481 4.93902 26.7496 3.84789C26.4511 2.86964 26.1899 2.60626 25.2196 2.53101C24.1747 2.41813 24.0255 2.56864 23.615 3.73502ZM16.3382 19.0109C19.9953 20.7792 22.5701 24.2784 23.0552 28.0409C23.4657 31.0509 23.5777 31.3519 24.5479 31.5777C26.0779 31.9539 26.9735 31.2391 26.9735 29.5835C26.9735 24.2031 32.3844 18.2583 37.2356 18.2583C40.818 18.2583 43.0197 20.2525 43.0197 23.4883C43.0197 26.2349 39.9971 31.3519 37.2356 33.2708C36.1534 33.9857 35.4817 34.1362 33.28 34.1362C31.8247 34.0986 29.3991 33.9104 27.8691 33.6847C25.9286 33.3837 24.324 33.3837 22.3835 33.6471C19.5848 34.0609 17.2338 34.2114 15.0321 34.0986C13.95 34.0609 13.3529 33.6471 11.4871 31.6906C7.60611 27.5894 6.26271 23.413 7.90465 20.6664C9.32268 18.3336 13.3156 17.5435 16.3382 19.0109ZM33.6532 40.2315C34.3622 40.4572 34.9966 40.8335 35.0712 41.0969C35.4071 42.0751 33.8771 42.2632 29.4737 41.887C26.4884 41.6236 23.7269 41.6236 20.7416 41.887C16.4875 42.2632 15.0321 42.0751 15.0321 41.1721C15.0321 40.4949 17.0472 40.0057 20.8162 39.7424C25.2943 39.4037 31.8993 39.6671 33.6532 40.2315Z" fill="white"/>
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'q'">
                <svg width="51" height="50" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.8468 4.67463C21.5673 5.64741 21.3479 7.1246 22.1157 9.53855C22.9565 12.1687 22.9199 15.7716 22.0791 20.0591L21.4576 23.3017L20.6168 21.5002C18.8619 17.6811 17.948 14.3665 18.0211 12.1326C18.0576 10.9437 18.0942 9.53855 18.0942 8.99812C18.1673 6.65623 15.462 4.99889 13.1222 5.97167C11.5868 6.58417 11.0384 7.34078 10.819 8.99812C10.6728 10.1871 10.7825 10.5834 11.7696 11.6643C13.4147 13.5018 13.6341 14.4385 13.6341 19.0863L13.5975 23.3017L12.1717 21.7524C9.90508 19.2664 9.10079 17.3208 9.39326 14.9069C9.57605 13.2135 9.50293 12.6371 8.88143 11.6643C7.63844 9.68267 5.70083 9.28635 3.76323 10.5834C1.49659 12.0966 1.60627 15.087 3.94602 16.8164C4.96966 17.6091 5.15245 18.0054 5.37181 19.8789C5.51804 21.0318 6.10298 23.8061 6.65136 25.9678C7.56532 29.4626 7.93091 30.2193 9.53949 32.2009C10.5266 33.4619 11.6233 35.0111 11.9524 35.6596C12.5373 36.7766 12.5373 36.9207 11.6233 39.3706C10.0513 43.6941 10.3438 44.1985 14.9136 45.3515C18.4232 46.2162 31.5112 46.2162 35.5327 45.3515C39.8466 44.4147 40.395 43.3699 38.6402 39.2626C38.0918 37.9655 37.7993 36.7405 37.909 36.2361C38.0187 35.8038 39.152 34.1825 40.3584 32.6332C42.5154 29.9671 42.625 29.7148 43.6487 25.5715C44.1971 23.1936 44.782 20.4193 44.8917 19.3745C45.111 17.8252 45.3304 17.4289 46.3175 16.8164C48.84 15.1951 48.6938 11.5202 46.0616 10.2952C44.453 9.53855 43.1369 9.82679 41.7111 11.268C40.6509 12.3128 40.6143 12.4209 40.8702 14.6187C41.0896 16.6363 40.9799 17.1407 40.2122 18.6539C39.7004 19.6267 38.7133 21.0679 37.9821 21.8605L36.7025 23.3017L36.5929 21.1399C36.337 15.5554 36.8122 13.2856 38.4208 11.8084C41.1627 9.39444 38.1649 4.67463 34.6553 5.82756C32.4617 6.54814 32.0962 7.30475 32.2058 10.9077C32.279 13.6819 32.1693 14.5466 31.2188 17.3569C30.5973 19.1583 29.793 21.212 29.4274 21.9326L28.7328 23.2296L28.1478 19.987C27.3801 15.9157 27.3435 11.8084 28.0747 9.79076C28.879 7.55695 28.7693 6.07976 27.7091 4.96286C26.6489 3.80993 24.1995 3.66581 22.8468 4.67463ZM26.3565 6.25991C26.978 6.8724 26.9048 8.16945 26.2468 8.70988C24.8576 9.82679 22.7372 7.7371 23.8705 6.36799C24.4188 5.71947 25.735 5.64741 26.3565 6.25991ZM15.9007 8.49371C16.7415 9.75473 15.9007 10.9437 14.3287 10.7996C13.2685 10.6915 13.0857 10.5474 12.976 9.61061C12.8663 8.92606 13.0491 8.42165 13.4878 8.09739C14.1824 7.59298 15.462 7.80916 15.9007 8.49371ZM36.8122 8.09739C37.2509 8.42165 37.4337 8.92606 37.324 9.61061C37.2509 10.4753 37.0316 10.7275 36.1907 10.7996C34.2166 11.0157 33.3757 9.25032 34.9112 8.20548C35.8983 7.52092 36.0079 7.52092 36.8122 8.09739ZM6.98039 12.3849C7.60188 12.9973 7.52877 14.2944 6.87071 14.8348C6.13954 15.4473 4.60408 15.015 4.31161 14.1142C3.79979 12.529 5.81051 11.2319 6.98039 12.3849ZM45.5863 12.529C46.2809 13.1775 46.3175 13.5378 45.8056 14.5106C45.0745 15.8436 42.881 15.1591 42.881 13.5738C42.881 12.0606 44.4895 11.4481 45.5863 12.529ZM35.3864 30.0031C36.4101 30.3634 36.8853 30.7597 36.9585 31.2641L37.0681 32.0567L25.1866 32.0207C13.8534 31.9847 13.2685 31.9487 13.2685 31.3362C13.2685 29.8229 17.2534 29.2465 26.6124 29.3906C31.5478 29.4987 34.3994 29.6788 35.3864 30.0031ZM33.8875 37.8574C34.6553 38.0376 35.5692 38.4699 35.8983 38.7582C36.3735 39.2626 36.3735 39.4067 35.9348 39.839C35.4596 40.2714 34.4725 40.3074 30.0854 40.0912C27.1607 39.9111 22.5909 39.9111 19.8856 40.0912C15.0964 40.4155 13.9996 40.2353 13.9996 39.2986C13.9996 38.7221 16.0835 37.9295 18.4232 37.5692C21.2017 37.1368 31.8403 37.353 33.8875 37.8574Z" fill="white"/>
                </svg>
            </template>
        </template>

        <template v-else-if="color === 'black'">
            <template v-if="getPieceFirstCharacter === 'p'">
                <svg width="50" height="50" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.6616 4.79246C18.8931 6.16735 17.9567 8.76001 19.056 11.7848C19.4224 12.7276 19.6667 13.5525 19.626 13.5918C19.5445 13.6311 18.8117 14.0239 17.9975 14.5346C15.2697 16.1059 14.0483 20.2698 15.3919 23.3339C15.6768 24.041 16.5318 25.1016 17.2646 25.7301C18.3232 26.5944 18.486 26.8693 18.0382 27.1443C16.0025 28.2442 13.0712 30.7583 12.0127 32.2511C10.0992 35.0008 9.44784 37.1614 9.24427 41.7575L9 46H25H41L40.7557 41.7575C40.5929 38.8898 40.2672 36.8471 39.6565 35.3151C38.6387 32.6832 35.8702 29.5406 33.3053 28.0871C32.3282 27.5371 31.514 26.9872 31.514 26.8693C31.514 26.7515 32.0025 26.3194 32.5725 25.848C33.8346 24.9052 35.1374 22.3125 35.1781 20.702C35.1781 18.62 34.2417 16.538 32.7354 15.2024C31.8804 14.4953 30.9847 13.8275 30.6997 13.7096C30.2519 13.5918 30.2519 13.2775 30.6183 12.2169C30.9033 11.5098 31.1069 10.1742 31.1069 9.2314C31.1069 5.146 25.855 2.63191 21.6616 4.79246Z" />
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'r'">
                <svg width="51" height="50" viewBox="0 0 51 50" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.6134 5.10929C9.66492 6.09974 9.54636 6.49592 9.54636 9.18992V12.1613L12.5102 15.093L15.4741 18.0247V24.9974V31.9305L11.7199 35.6942L7.96564 39.4579V42.0727C7.96564 46.2721 6.66154 45.9948 26.0254 45.9948C45.2707 45.9948 43.9271 46.3117 43.9271 41.9934V39.4579L40.3705 35.8923L36.8138 32.3267V25.1955V18.0247L39.5801 15.2911L42.3464 12.5574V9.15031C42.3464 6.09974 42.2673 5.62433 41.4375 4.87159C40.6866 4.15847 40.0543 4 37.7623 4C34.7984 4 34.0476 4.35656 34.0476 5.86203C34.0476 6.65439 33.85 6.77324 32.6644 6.77324C31.4789 6.77324 31.2813 6.65439 31.2813 5.86203C31.2813 4.23771 30.6095 4 26.144 4C21.6784 4 21.0066 4.23771 21.0066 5.86203C21.0066 6.65439 20.809 6.77324 19.6235 6.77324C18.5565 6.77324 18.2403 6.61477 18.2403 6.06012C18.2403 4.63388 16.9758 4 14.249 4C11.957 4 11.5618 4.11885 10.6134 5.10929ZM34.0476 18.8567V20.2433L26.0649 20.164L18.0428 20.0452L17.9242 18.7378L17.8056 17.47H25.9069H34.0476V18.8567ZM34.0476 31.7324V32.921H25.9464H17.8452V31.7324V30.5439H25.9464H34.0476V31.7324Z" />
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'n'">
                <svg width="51" height="50" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21.63 5.53084L20.3705 7.06168L18.245 6.08037C17.0641 5.53084 15.2535 5.05981 14.2695 5.05981L12.4589 4.98131L12.5376 7.72897C12.6163 11.0262 12.144 12.557 8.24725 20.8393C6.6728 24.1757 4.98027 28.0617 4.50794 29.5533C3.642 32.1047 3.60263 32.2224 4.31114 33.3215C5.29516 34.9701 6.75153 35.9907 8.87703 36.5794C10.1366 36.9327 10.8844 36.972 11.3568 36.6972C11.8291 36.3832 12.0653 36.5009 12.3802 37.129C12.6163 37.6 13.1674 37.9925 13.6397 38.071C14.3089 38.1888 14.8993 37.6 16.4737 35.2841C17.5365 33.6748 18.9928 31.9084 19.7013 31.3196C21.1183 30.1028 23.9917 28.572 24.2672 28.8467C24.6608 29.2393 22.7715 32.772 20.5279 35.9121C19.229 37.6785 17.9301 39.6411 17.5758 40.3084C17.1035 41.2505 16.1195 45.0187 16.1195 45.8037C16.1195 45.9215 22.929 46 31.2342 46H46.3095L46.585 44.1944C47.451 37.6393 45.7978 27.0804 43.0031 21.4673C39.5394 14.5981 34.5011 10.1626 29.3448 9.53458C27.4948 9.29906 27.3768 9.22056 26.8651 7.65047C26.314 6.00187 24.4247 4 23.4013 4C23.0864 4 22.2992 4.70654 21.63 5.53084ZM29.8172 13.2243C33.9107 14.4411 39.4213 20.957 41.3893 26.9626C42.5702 30.5346 43.2787 35.0093 43.2787 38.8953C43.2787 41.7215 42.6883 43.0561 41.6255 42.6636C40.7989 42.3495 40.5234 41.2505 40.5234 37.914C40.5234 34.2243 39.5787 28.8467 38.3979 25.9813C36.2724 20.8 31.9427 16.129 27.9278 14.7159C26.0385 14.0486 25.4481 13.3028 26.4715 12.9103C27.2587 12.557 27.6917 12.5963 29.8172 13.2243ZM18.3631 16.443C18.4811 16.7178 17.8514 17.6598 17.0248 18.5234C15.8833 19.7794 15.2142 20.172 14.1514 20.2112C12.144 20.329 12.0653 18.9551 13.9153 17.1103C15.0961 15.9327 15.5291 15.7364 16.7493 15.8542C17.5758 15.9327 18.2843 16.1682 18.3631 16.443ZM8.24725 30.6131C8.24725 31.5944 7.42067 32.5757 6.476 32.7327C5.84622 32.8112 5.72814 32.6542 5.80686 31.8692C5.9643 30.2598 8.24725 29.0822 8.24725 30.6131Z" fill="black"/>
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'b'">
                <svg width="51" height="50" viewBox="0 0 51 50" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.9364 3.66555C21.2672 4.71643 20.8499 7.13345 21.9627 9.27023L22.4843 10.2861L20.8847 11.0567C20.0153 11.4771 18.1722 12.9483 16.7464 14.3495C14.5903 16.4862 14.1383 17.1168 13.6166 18.8682C12.7472 21.8807 13.408 24.5079 15.9813 28.151C17.0246 29.6222 17.0594 29.6922 16.6073 31.3036C15.5293 35.1218 15.8422 36.1026 18.3808 36.4879C19.1111 36.628 19.7023 36.8382 19.7023 36.9433C19.7023 37.5037 16.2943 38.0292 12.8863 38.0292C8.64377 38.0292 7.77439 38.3444 6.2095 40.5163L5.13147 41.9875L6.4877 44.0192C7.25276 45.1401 8.22647 46.2961 8.60899 46.5763C9.26972 47.0317 9.4436 47.0317 10.1739 46.5413C10.6607 46.226 13.0254 45.7356 15.6336 45.3853C21.2324 44.6147 22.693 44.2293 24.3622 43.1084L25.6836 42.1977L26.7964 42.9333C28.7786 44.1593 30.8651 44.7198 35.8032 45.3853C39.1069 45.8057 40.8109 46.191 41.2629 46.6113C41.7498 47.0667 42.0628 47.1017 42.6192 46.8215C43.2799 46.4362 46.1315 42.583 46.1315 42.0225C46.1315 41.4971 44.2536 39.3253 43.2104 38.6947C42.341 38.1693 41.4716 38.0292 38.5852 38.0292C35.0729 38.0292 31.5259 37.4687 31.5259 36.9082C31.5259 36.7681 31.9084 36.628 32.3953 36.628C33.6124 36.628 35.2468 35.7173 35.4902 34.9466C35.5946 34.6314 35.3859 33.2652 35.0034 31.9341L34.3427 29.5521L35.6989 27.5555C39.0721 22.5463 38.8634 18.553 34.9686 14.5947C33.5081 13.1234 30.6217 11.0567 29.3698 10.6013C28.8482 10.4262 28.883 10.2861 29.5089 8.98999C30.4131 7.16847 30.1349 5.38199 28.7439 3.98082C27.9092 3.14012 27.4919 3 25.8923 3C24.6752 3 23.6667 3.2452 22.9364 3.66555ZM26.7964 6.01251C27.4572 6.64304 27.4919 6.99333 27.0051 7.93912C26.3096 9.2352 24.2231 8.56964 24.2231 7.02836C24.2231 5.55713 25.7532 4.96164 26.7964 6.01251ZM26.7269 16.7314C26.6226 18.0275 26.6226 18.0625 27.8397 18.0625C29.0221 18.0625 29.0916 18.1326 29.0916 19.2535C29.0916 20.3745 28.9873 20.4796 27.9788 20.5847C26.9008 20.6897 26.8312 20.7948 26.8312 22.0208C26.8312 23.2469 26.7617 23.3169 25.7184 23.3169C24.6056 23.3169 24.5708 23.2469 24.5708 21.9158C24.5708 20.6197 24.5013 20.5146 23.5623 20.5146C22.7277 20.5146 22.5539 20.3394 22.4148 19.4637C22.2409 18.2027 22.3104 18.0625 23.5971 18.0625C24.5013 18.0625 24.5708 17.9575 24.5708 16.6264C24.5708 15.2602 24.6056 15.2252 25.7184 15.3303C26.7964 15.4354 26.8312 15.5054 26.7269 16.7314ZM31.7693 27.3803C31.8736 27.6956 31.7693 28.0809 31.4911 28.256C30.9347 28.6414 19.8762 28.5363 19.5284 28.151C19.3893 28.0108 19.3545 27.6605 19.4589 27.3453C19.8066 26.5396 31.4563 26.5396 31.7693 27.3803ZM31.3172 30.8832C32.0475 31.1635 32.0127 31.9341 31.2824 32.2494C30.9347 32.3895 28.6743 32.5646 26.2748 32.6697C20.8151 32.9149 17.9983 32.1793 19.9805 31.0584C20.6064 30.6731 30.4131 30.5329 31.3172 30.8832Z" />
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'k'">
                <svg width="51" height="50" viewBox="0 0 51 50" xmlns="http://www.w3.org/2000/svg">
                    <path d="M11.4124 20.1772C9.91969 20.6287 8.68823 22.1713 8.68823 23.6387C8.68823 25.3695 10.1063 28.0032 12.2333 30.1479C13.9126 31.841 14.3231 32.0667 16.1516 32.2925C18.4279 32.5559 20.9281 32.1044 21.4506 31.3519C22.2342 30.1855 21.0028 25.6328 19.3235 23.3753C17.2711 20.7416 14.0618 19.4247 11.4124 20.1772Z" />
                    <path d="M28.802 28.7182C29.511 24.3913 32.2724 20.9298 35.6682 20.1396C36.3026 19.9891 37.0863 19.9139 37.3475 19.9891C37.646 20.0644 38.2058 20.1396 38.6163 20.1396C39.0267 20.1396 39.8477 20.6288 40.4448 21.2308C41.2657 22.0585 41.527 22.6981 41.527 23.7893C41.527 25.7082 39.6611 28.8311 37.3475 30.7876C35.6309 32.2173 35.519 32.2549 32.7575 32.2549C28.9139 32.2549 28.3168 31.7658 28.802 28.7182Z" />
                    <path d="M23.615 3.73502C23.2418 4.93902 23.0552 5.08953 21.8984 5.08953C20.7043 5.08953 20.6297 5.16477 20.6297 6.36878C20.6297 7.49754 20.8162 7.79854 22.1223 8.51342C22.9433 9.00255 23.615 9.64218 23.615 9.94317C23.615 10.2442 22.8313 11.3353 21.8611 12.3136C20.2938 13.8938 20.1072 14.3077 19.958 16.189C19.8833 17.3177 19.7341 18.2583 19.6221 18.2583C19.5475 18.2583 18.9877 17.9197 18.428 17.4682C16.0024 15.6622 11.599 15.3988 8.6883 16.9415C7.19563 17.7316 5.44174 19.9139 4.99394 21.5317C4.13565 24.617 4.65809 26.423 7.83001 31.3143C10.181 34.8887 10.8154 36.6195 11.1512 40.5701C11.5244 44.7089 12.308 45.6495 16.3009 46.703C20.8909 47.9447 31.6008 47.6813 35.5937 46.2891C38.2805 45.3109 38.8029 44.5584 39.1014 41.2474C39.5119 37.0333 40.3702 34.6253 42.9451 30.7123C45.408 26.9874 45.8185 25.6705 45.5572 22.7358C44.9975 17.0543 38.5044 14.1572 32.9442 17.0543L30.7798 18.1831L30.5186 16.1137C30.2947 14.3077 30.0708 13.8562 28.6154 12.4641C26.6003 10.5076 26.5257 9.56693 28.2796 8.47579C29.3618 7.79854 29.5857 7.42229 29.5857 6.36878C29.5857 5.16477 29.511 5.08953 28.3169 5.08953C27.2347 5.08953 27.0481 4.93902 26.7496 3.84789C26.4511 2.86964 26.1899 2.60626 25.2196 2.53101C24.1747 2.41813 24.0255 2.56864 23.615 3.73502ZM16.3382 19.0109C19.9953 20.7792 22.5701 24.2784 23.0552 28.0409C23.4657 31.0509 23.5777 31.3519 24.5479 31.5777C26.0779 31.9539 26.9735 31.2391 26.9735 29.5835C26.9735 24.2031 32.3844 18.2583 37.2356 18.2583C40.818 18.2583 43.0197 20.2525 43.0197 23.4883C43.0197 26.2349 39.9971 31.3519 37.2356 33.2708C36.1534 33.9857 35.4817 34.1362 33.28 34.1362C31.8247 34.0986 29.3991 33.9104 27.8691 33.6847C25.9286 33.3837 24.324 33.3837 22.3835 33.6471C19.5848 34.0609 17.2338 34.2114 15.0321 34.0986C13.95 34.0609 13.3529 33.6471 11.4871 31.6906C7.60611 27.5894 6.26271 23.413 7.90465 20.6664C9.32268 18.3336 13.3156 17.5435 16.3382 19.0109ZM33.6532 40.2315C34.3622 40.4572 34.9966 40.8335 35.0712 41.0969C35.4071 42.0751 33.8771 42.2632 29.4737 41.887C26.4884 41.6236 23.7269 41.6236 20.7416 41.887C16.4875 42.2632 15.0321 42.0751 15.0321 41.1721C15.0321 40.4949 17.0472 40.0057 20.8162 39.7424C25.2943 39.4037 31.8993 39.6671 33.6532 40.2315Z" />
                </svg>
            </template>
            <template v-else-if="getPieceFirstCharacter === 'q'">
                <svg width="51" height="50" viewBox="0 0 51 50" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.8468 4.67463C21.5673 5.64741 21.3479 7.1246 22.1157 9.53855C22.9565 12.1687 22.9199 15.7716 22.0791 20.0591L21.4576 23.3017L20.6168 21.5002C18.8619 17.6811 17.948 14.3665 18.0211 12.1326C18.0576 10.9437 18.0942 9.53855 18.0942 8.99812C18.1673 6.65623 15.462 4.99889 13.1222 5.97167C11.5868 6.58417 11.0384 7.34078 10.819 8.99812C10.6728 10.1871 10.7825 10.5834 11.7696 11.6643C13.4147 13.5018 13.6341 14.4385 13.6341 19.0863L13.5975 23.3017L12.1717 21.7524C9.90508 19.2664 9.10079 17.3208 9.39326 14.9069C9.57605 13.2135 9.50293 12.6371 8.88143 11.6643C7.63844 9.68267 5.70083 9.28635 3.76323 10.5834C1.49659 12.0966 1.60627 15.087 3.94602 16.8164C4.96966 17.6091 5.15245 18.0054 5.37181 19.8789C5.51804 21.0318 6.10298 23.8061 6.65136 25.9678C7.56532 29.4626 7.93091 30.2193 9.53949 32.2009C10.5266 33.4619 11.6233 35.0111 11.9524 35.6596C12.5373 36.7766 12.5373 36.9207 11.6233 39.3706C10.0513 43.6941 10.3438 44.1985 14.9136 45.3515C18.4232 46.2162 31.5112 46.2162 35.5327 45.3515C39.8466 44.4147 40.395 43.3699 38.6402 39.2626C38.0918 37.9655 37.7993 36.7405 37.909 36.2361C38.0187 35.8038 39.152 34.1825 40.3584 32.6332C42.5154 29.9671 42.625 29.7148 43.6487 25.5715C44.1971 23.1936 44.782 20.4193 44.8917 19.3745C45.111 17.8252 45.3304 17.4289 46.3175 16.8164C48.84 15.1951 48.6938 11.5202 46.0616 10.2952C44.453 9.53855 43.1369 9.82679 41.7111 11.268C40.6509 12.3128 40.6143 12.4209 40.8702 14.6187C41.0896 16.6363 40.9799 17.1407 40.2122 18.6539C39.7004 19.6267 38.7133 21.0679 37.9821 21.8605L36.7025 23.3017L36.5929 21.1399C36.337 15.5554 36.8122 13.2856 38.4208 11.8084C41.1627 9.39444 38.1649 4.67463 34.6553 5.82756C32.4617 6.54814 32.0962 7.30475 32.2058 10.9077C32.279 13.6819 32.1693 14.5466 31.2188 17.3569C30.5973 19.1583 29.793 21.212 29.4274 21.9326L28.7328 23.2296L28.1478 19.987C27.3801 15.9157 27.3435 11.8084 28.0747 9.79076C28.879 7.55695 28.7693 6.07976 27.7091 4.96286C26.6489 3.80993 24.1995 3.66581 22.8468 4.67463ZM26.3565 6.25991C26.978 6.8724 26.9048 8.16945 26.2468 8.70988C24.8576 9.82679 22.7372 7.7371 23.8705 6.36799C24.4188 5.71947 25.735 5.64741 26.3565 6.25991ZM15.9007 8.49371C16.7415 9.75473 15.9007 10.9437 14.3287 10.7996C13.2685 10.6915 13.0857 10.5474 12.976 9.61061C12.8663 8.92606 13.0491 8.42165 13.4878 8.09739C14.1824 7.59298 15.462 7.80916 15.9007 8.49371ZM36.8122 8.09739C37.2509 8.42165 37.4337 8.92606 37.324 9.61061C37.2509 10.4753 37.0316 10.7275 36.1907 10.7996C34.2166 11.0157 33.3757 9.25032 34.9112 8.20548C35.8983 7.52092 36.0079 7.52092 36.8122 8.09739ZM6.98039 12.3849C7.60188 12.9973 7.52877 14.2944 6.87071 14.8348C6.13954 15.4473 4.60408 15.015 4.31161 14.1142C3.79979 12.529 5.81051 11.2319 6.98039 12.3849ZM45.5863 12.529C46.2809 13.1775 46.3175 13.5378 45.8056 14.5106C45.0745 15.8436 42.881 15.1591 42.881 13.5738C42.881 12.0606 44.4895 11.4481 45.5863 12.529ZM35.3864 30.0031C36.4101 30.3634 36.8853 30.7597 36.9585 31.2641L37.0681 32.0567L25.1866 32.0207C13.8534 31.9847 13.2685 31.9487 13.2685 31.3362C13.2685 29.8229 17.2534 29.2465 26.6124 29.3906C31.5478 29.4987 34.3994 29.6788 35.3864 30.0031ZM33.8875 37.8574C34.6553 38.0376 35.5692 38.4699 35.8983 38.7582C36.3735 39.2626 36.3735 39.4067 35.9348 39.839C35.4596 40.2714 34.4725 40.3074 30.0854 40.0912C27.1607 39.9111 22.5909 39.9111 19.8856 40.0912C15.0964 40.4155 13.9996 40.2353 13.9996 39.2986C13.9996 38.7221 16.0835 37.9295 18.4232 37.5692C21.2017 37.1368 31.8403 37.353 33.8875 37.8574Z" fill="white"/>
                </svg>
            </template>
        </template>
    </div>
</template>

<style lang="scss" scoped>
@use '@/assets/_variables.scss' as *;

.piece {
	background-size: 100%;
	cursor: grab;
	cursor: -webkit-grab;
	overflow: hidden;
	touch-action: manipulation;
	width: 100%;
    max-width: 200px;
	height: auto;
	aspect-ratio: 1;
    padding: clamp(5px, 7.5%, 50px);
	will-change: transform, cursor, left, top, bottom, right;
	user-select: none;
    pointer-events: all;
    transform-origin: center;
    transform-box: fill-box;

	&.white svg path {
        fill: $light;
        stroke: $black;
        stroke-width: .75px;
    }

    &.black svg path {
        fill: $black
    }

    svg {
        pointer-events: none;
        width: 100%;
        height: 100%;
    }
}

</style>